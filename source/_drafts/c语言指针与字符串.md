---
title: c语言指针与字符串
tags:
---

## 问题

```c
#include<string.h>
void main(){
    char str[] = "hello world";
	int len = strlen(str),i;
	for (i = 0; i < len; i++) {
		printf("%c", str[i]);
	}
        printf("\n");
	char *p = str;
	for (i = 0; i < len; i++) {
		printf("%c", *(p++));
	}
        printf("\n");
        for (i = 0; i < len; i++) {
		printf("%c", *(str+i));
	}
	system("pause");
```
- 字符数组归根结底还是一个数组，上图中定义的字符串数组，str也可以认为是一个指针，指针以及数组方面操作均适用。

除了字符数组外，C语言还支持直接使用一个指针指向字符串的方式来表示字符串，代码如下
```c
char *str = "hello C language";
```
### 原因
以此方式定义的字符串，同样可以对此字符串进行多样的操作。为什么可以用字符数组表示字符串，非要弄个指针来表示字符串呢？这其中定有深意。原来它们最根本的区别是在内存中的存储区域不一样，字符数组存储在全局数据区或栈区，而以指针形式表示的字符串却存储在常量区。全局数据区和栈区的字符串（也包括其他数据）有读取和写入的权限，而常量区的字符串（也包括其他数据）只有读取权限，没有写入权限。一句话概括：数组形字符串存放在全局数据区或栈区，可读可写。指针字符串存放在常量区，只读不能写。

所以经常会出现我在本地调试的时候字符串指针无法修改其内容（指针指向一个常量），但是在leecode（指针指向数组，存储于堆栈）却可以。。。尴尬。


